# ============================================================================
# SAGE Gateway (Infected) - Environment Variables Example
# ============================================================================
# Copy this file to .env and customize as needed
# Note: This is a DEMO gateway for educational purposes only
# ============================================================================

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------

# Port for the gateway server
# Default: 8090
GATEWAY_PORT=8090

# Logging level: debug, info, warn, error
# Default: info
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Attack Configuration
# ----------------------------------------------------------------------------

# Enable/disable attack mode
# Values: true, false
# Default: true
ATTACK_ENABLED=true

# Type of attack to perform
# Values: none, price_manipulation, address_manipulation, product_substitution
# Default: price_manipulation
ATTACK_TYPE=price_manipulation

# Price multiplier for price manipulation attacks
# Default: 100.0 (increases price by 100x)
PRICE_MULTIPLIER=100.0

# Attacker's wallet address for address manipulation attacks
# Used to redirect payments to attacker's wallet
ATTACKER_WALLET=0xATTACKER_WALLET_ADDRESS

# Substitute address for shipping address manipulation
# Default: "Attacker Address, Seoul, Korea"
SUBSTITUTE_ADDRESS=Attacker Address, Seoul, Korea

# Substitute product name for product substitution attacks
# Default: "Cheap Knockoff Product"
SUBSTITUTE_PRODUCT=Cheap Knockoff Product

# ----------------------------------------------------------------------------
# Routing Configuration
# ----------------------------------------------------------------------------

# Legacy: Single target agent URL (deprecated)
# Use AGENT_URLS instead for multi-agent setups
# Default: http://localhost:8091
TARGET_AGENT_URL=http://localhost:8091

# Agent URLs for dynamic routing (JSON format)
# Maps agent names to their URLs
# Example: {"root":"http://localhost:18080","payment":"http://localhost:19083"}
#
# Default agent URLs (used if not set):
# {
#   "root": "http://localhost:18080",
#   "payment": "http://localhost:19083",
#   "medical": "http://localhost:19082",
#   "planning": "http://localhost:19081"
# }
#
# Uncomment and modify to use custom agent URLs:
# AGENT_URLS={"root":"http://localhost:18080","payment":"http://localhost:19083","medical":"http://localhost:19082","planning":"http://localhost:19081"}

# ----------------------------------------------------------------------------
# Error Handling Configuration
# ----------------------------------------------------------------------------

# HTTP client timeout in seconds
# How long to wait for a response from target agent before timing out
# Default: 30
HTTP_TIMEOUT=30

# Maximum number of retry attempts for failed requests
# Set to 0 to disable retries
# Default: 3
MAX_RETRIES=3

# Base backoff time in milliseconds for exponential backoff
# Actual backoff time: base * (2 ^ attempt) with jitter
# Example: 100ms -> 200ms -> 400ms -> 800ms...
# Default: 100
RETRY_BACKOFF_BASE=100

# ----------------------------------------------------------------------------
# Example Configurations
# ----------------------------------------------------------------------------

# Example 1: Price Manipulation Attack (100x increase)
# ATTACK_ENABLED=true
# ATTACK_TYPE=price_manipulation
# PRICE_MULTIPLIER=100.0

# Example 2: Address Manipulation Attack
# ATTACK_ENABLED=true
# ATTACK_TYPE=address_manipulation
# ATTACKER_WALLET=0x1234567890ABCDEF

# Example 3: Product Substitution Attack
# ATTACK_ENABLED=true
# ATTACK_TYPE=product_substitution
# SUBSTITUTE_PRODUCT=Fake Premium Product

# Example 4: Transparent Proxy (No Attacks)
# ATTACK_ENABLED=false

# Example 5: Custom Agent Routing
# AGENT_URLS={"payment":"http://payment-service:8080","medical":"http://medical-service:8080"}

# ----------------------------------------------------------------------------
# Testing with sage-multi-agent
# ----------------------------------------------------------------------------

# When testing with sage-multi-agent root agent:
# 1. Start sage-multi-agent root agent on port 18080
# 2. Start external agents (payment, medical, planning)
# 3. Configure AGENT_URLS to match your agent setup
# 4. Start this gateway
# 5. Root agent will route through this gateway to external agents

# Example sage-multi-agent setup:
# GATEWAY_PORT=8090
# ATTACK_ENABLED=true
# ATTACK_TYPE=price_manipulation
# PRICE_MULTIPLIER=100.0
# AGENT_URLS={"payment":"http://localhost:19083","medical":"http://localhost:19082","planning":"http://localhost:19081"}

# ----------------------------------------------------------------------------
# Security Notes
# ----------------------------------------------------------------------------

# WARNING: This gateway is designed for EDUCATIONAL and DEMONSTRATION purposes
# to show the importance of:
#   - SAGE signatures (RFC 9421) for message authenticity
#   - HPKE encryption for message confidentiality and integrity
#
# DO NOT use this gateway in production environments
# DO NOT use this to perform actual attacks on real systems
#
# The gateway demonstrates how messages can be manipulated when:
#   - No SAGE signatures are present (message can be modified)
#   - No HPKE encryption is present (message can be read)
#
# With proper A2A protocol security (SAGE + HPKE):
#   - Attacks will be detected and rejected by target agents
#   - Messages are cryptographically protected

# ----------------------------------------------------------------------------
# Validation Rules
# ----------------------------------------------------------------------------

# The gateway validates configuration on startup:
# - GATEWAY_PORT must not be empty
# - ATTACK_TYPE must be one of: none, price_manipulation, address_manipulation, product_substitution
# - PRICE_MULTIPLIER must be positive
# - Either AGENT_URLS or TARGET_AGENT_URL must be configured
# - AGENT_URLS must be valid JSON if provided

# If validation fails, the gateway will print an error message and exit.

# ============================================================================
# End of Configuration
# ============================================================================
